<!DOCTYPE html>
<html>
<head>
    <title>Erasmus Mobility Data</title>
</head>
<body>
<h1>Erasmus Mobility Data</h1>
<button onclick="displayData()">Display Data</button>
<button onclick="orderByReceivingCountry()">Order by Receiving Country</button>
<button onclick="saveToDatabase()">Save to Database</button>
<div id="results"></div>
<script >

       function displayData() {
            fetch('/api/displayData')
                .then(response => response.json())
                .then(data => displayTable(data, 'results'));
        }

        function orderByReceivingCountry() {
            fetch('/api/orderByReceivingCountry')
                .then(response => response.json())
                .then(data => displayTable(data, 'results'));
        }

        function saveToDatabase() {
            fetch('/api/saveToDatabase')
                .then(response => response.json())
                .then(data => displayTablesForCountries(data, 'results'));
        }

        function displayTable(data, elementId) {
            let tableHtml = '<table border="1"><tr>';
            for (let header in data[0]) {
                tableHtml += '<th>' + header + '</th>';
            }
            tableHtml += '</tr>';
            for (let item of data) {
                tableHtml += '<tr>';
                for (let value of Object.values(item)) {
                    tableHtml += '<td>' + value + '</td>';
                }
                tableHtml += '</tr>';
            }
            tableHtml += '</table>';
            document.getElementById(elementId).innerHTML = tableHtml;
        }

        function displayTablesForCountries(data, elementId) {
            let tablesHtml = '';
            for (let countryData of data) {
                tablesHtml += '<h2>Results for ' + countryData.country + ':</h2>';
                tablesHtml += '<div>';
                tablesHtml += '<table border="1"><tr>';
                for (let header in countryData.data[0]) {
                    tablesHtml += '<th>' + header + '</th>';
                }
                tablesHtml += '</tr>';
                for (let item of countryData.data) {
                    tablesHtml += '<tr>';
                    for (let value of Object.values(item)) {
                        tablesHtml += '<td>' + value + '</td>';
                    }
                    tablesHtml += '</tr>';
                }
                tablesHtml += '</table>';
                tablesHtml += '</div>';
            }
            document.getElementById(elementId).innerHTML = tablesHtml;
        }
    </script>
</body>
</html>
